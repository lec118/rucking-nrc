# 📱 iPhone Safari PWA 설치 가이드

러킹 추적기를 iPhone 홈 화면에 앱처럼 설치하는 방법입니다.

---

## 🚀 설치 방법

### 1단계: Safari에서 접속
1. iPhone에서 **Safari 앱** 실행
2. 주소창에 입력: `https://your-app.vercel.app/slim`
   - (실제 Vercel URL로 변경)

### 2단계: 홈 화면에 추가
1. 화면 하단 **공유 버튼** 탭 (□↑ 아이콘)
2. 스크롤해서 **"홈 화면에 추가"** 찾기
3. 앱 이름 확인: **"러킹 추적기 (슬림)"**
4. 우측 상단 **"추가"** 탭

### 3단계: 홈 화면에서 실행
1. 홈 화면에 **러킹 추적기** 아이콘이 생김
2. 아이콘을 탭하면 **전체 화면 앱**으로 실행됨
3. Safari 주소창/툴바가 없는 깔끔한 화면!

---

## ✅ 설치 후 첫 실행

### 1. 위치 권한 허용
처음 실행 시 위치 권한 요청:
- **"허용"** 선택
- GPS 추적을 위해 필수

### 2. 체중/배낭무게 입력
- 체중 (kg): 예) 70
- 배낭 무게 (kg): 예) 10

### 3. 운동 시작
- **"운동 시작"** 버튼 탭
- GPS 신호 잡힐 때까지 5-10초 대기
- 지도에 파란 점(현재 위치) 표시됨

---

## 🏃‍♂️ 사용 방법

### 실시간 추적 화면
- **TIME**: 경과 시간 (분:초)
- **DIST**: 이동 거리 (km)
- **PACE**: 현재 페이스 (분/km)
  - 3초 이상 정지 시 `--:--` 표시
- **ELEV**: 고도 상승 (m)

### 버튼
- **일시정지**: 시간 및 거리 측정 중단
- **재개**: 측정 재시작 (드리프트 없음)
- **종료**: 운동 종료 및 결과 표시

### 운동 종료 후
- **RuckScore 게이지**: 0-100 점수
  - 0-40: 가벼운 운동 (회색)
  - 40-70: 중간 강도 (노란색)
  - 70-100: 고강도 (초록색)
- **4개 메트릭 타일**:
  - 에너지 소모 (kcal)
  - 심폐 부하 (TRIMP)
  - 기계적 부하 (kg·km)
  - 수직 일량 (kJ)

---

## ⚠️ iOS Safari PWA 제약사항

### 백그라운드 실행 안 됨
**중요**: Safari PWA는 화면이 꺼지면 JavaScript 실행이 중단됩니다.

**영향:**
- ❌ GPS 추적 중단
- ❌ 타이머 멈춤
- ❌ 거리 측정 중단

**해결책:**
1. **화면 켜둔 상태 유지** (권장)
   - 설정 → 화면 및 밝기 → 자동 잠금 → **"안 함"**
   - 운동 중에만 설정, 운동 후 다시 원래대로

2. **배터리 절약 팁**
   - 화면 밝기 최소로 설정
   - 저전력 모드 해제 (GPS 정확도 유지)
   - 배터리팩 사용 권장

### 알림 없음
- iOS Safari PWA는 푸시 알림 미지원 (2025년 기준)
- 백그라운드 동기화 제한적

### 캐시 제한
- Safari PWA 캐시는 제한적 (50MB)
- 지도 타일이 많으면 느려질 수 있음

---

## 🔋 배터리 절약 팁

### 운동 전 설정
1. **저전력 모드 OFF**
   - 설정 → 배터리 → 저전력 모드 끄기
   - GPS 정확도 유지 위해 필수

2. **불필요한 앱 종료**
   - 홈 버튼 2번 클릭 → 다른 앱 스와이프 종료

3. **비행기 모드 + WiFi**
   - 셀룰러 데이터 대신 WiFi만 사용 (선택사항)
   - GPS는 비행기 모드에서도 작동

### 운동 중 설정
1. **화면 밝기 최소**
   - 제어 센터 → 밝기 슬라이더 최소

2. **화면 자동 잠금 "안 함"**
   - 설정 → 화면 및 밝기 → 자동 잠금 → 안 함

3. **배터리팩 사용**
   - 1시간 이상 운동 시 권장

---

## 📊 데이터 사용량

### GPS 추적
- **데이터 사용 안 함** (GPS는 위성 신호)
- 지도 타일만 데이터 사용 (최초 로드 시)

### 지도 타일 캐싱
- 첫 실행 시: 약 5-10MB 다운로드
- 이후: 캐시된 타일 사용 (데이터 최소)

### 오프라인 사용
- GPS 추적: 오프라인 가능 ✅
- 지도 표시: 캐시된 영역만 표시
- 운동 기록: 로컬 저장 (서버 없음)

---

## 🛠️ 문제 해결

### "위치 권한 거부됨"
**해결:**
1. 설정 → Safari → 위치
2. **"허용"** 선택
3. 앱 재실행

### "GPS 신호 없음"
**원인:**
- 실내, 건물 사이, 터널

**해결:**
- 야외 개활지로 이동
- 30초 정도 대기 (GPS 신호 잡힐 때까지)

### "지도가 표시되지 않음"
**원인:**
- MapTiler API 키 문제
- 네트워크 연결 끊김

**해결:**
1. WiFi/데이터 연결 확인
2. 앱 강제 종료 후 재시작
3. Safari 캐시 삭제:
   - 설정 → Safari → 방문 기록 및 웹사이트 데이터 지우기

### "페이스가 '--:--'로 계속 표시됨"
**원인:**
- GPS 정확도 낮음 (실내, 건물 사이)
- 속도 < 0.3 m/s (거의 정지 상태)

**해결:**
- 야외로 이동
- 걷기 시작 (3초 후 페이스 표시)

### "시간이 멈춤"
**원인:**
- 화면이 꺼짐 (iOS 제약)

**해결:**
- 화면 자동 잠금 "안 함" 설정
- 화면 켜둔 상태 유지

### "앱이 느려짐"
**해결:**
1. Safari 캐시 삭제
2. iPhone 재시작
3. 다른 앱 모두 종료

---

## 💡 Pro Tips

### 1. 운동 전 체크리스트
- [ ] 저전력 모드 OFF
- [ ] 화면 자동 잠금 "안 함"
- [ ] 배터리 충분 (50% 이상)
- [ ] 위치 권한 허용
- [ ] 야외 개활지에서 GPS 신호 확인

### 2. 배터리 수명 연장
- 화면 밝기 최소
- 배터리팩 사용 (1시간 이상 운동 시)
- 불필요한 앱 종료

### 3. GPS 정확도 높이기
- 야외 개활지에서 시작
- 고층 빌딩 사이 피하기
- GPS 신호 잡힐 때까지 30초 대기

### 4. 데이터 절약
- 집에서 WiFi로 지도 타일 미리 로드
- 운동 중에는 오프라인으로 사용
- 캐시된 지도 영역 활용

---

## 🔒 개인정보 보호

### 저장되는 데이터
- ✅ 거리, 시간, RuckScore (로컬만)
- ❌ GPS 경로 데이터 **저장 안 함**
- ❌ 서버 전송 **안 함**

### 위치 추적
- GPS 데이터는 **실시간 계산**에만 사용
- 운동 종료 시 경로 데이터 **자동 삭제**
- 요약 메트릭만 로컬 저장 (선택사항)

---

## 📞 문제 신고

문제가 계속되면:
1. 스크린샷 촬영
2. Safari Console 로그 복사 (가능하면)
3. GitHub Issues에 신고

---

## 🎯 운동 가이드

### 러킹 입문자
- 배낭 무게: 5-10kg
- 거리: 3-5km
- 페이스: 8-10분/km
- 주 2-3회

### 중급자
- 배낭 무게: 10-15kg
- 거리: 5-10km
- 페이스: 7-8분/km
- 주 3-4회

### 고급자
- 배낭 무게: 15-20kg
- 거리: 10-15km
- 페이스: 6-7분/km
- 주 4-5회

### 안전 수칙
- 주당 거리 증가: 10% 이하
- 배낭 무게: 체중의 20% 이하
- 고도 상승: 점진적으로 증가
- ACWR: 0.8-1.3 유지 (부상 예방)

---

**행복한 러킹 되세요!** 🎒🏃‍♂️

---

## 📋 체크리스트 (출력용)

```
□ Safari에서 /slim 접속
□ 홈 화면에 추가
□ 위치 권한 허용
□ 저전력 모드 OFF
□ 화면 자동 잠금 "안 함"
□ 배터리 50% 이상
□ 체중/배낭무게 입력
□ 야외에서 GPS 신호 확인
□ 운동 시작!
```
